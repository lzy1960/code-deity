# 设计文档：激励视频广告集成方案

**版本:** 1.1
**日期:** 2025-09-16
**负责人:** Gemini

---

## 1. 广告平台选择策略

这是一个关键决策，直接影响游戏的收入和用户体验。

| 特性 | Google AdMob | 穿山甲 (Pangle) | 分析与建议 |
| :--- | :--- | :--- | :--- |
| **🎯 目标市场** | **全球覆盖**，在北美、欧洲市场拥有绝对优势。 | **主宰中国大陆市场**，在东南亚、日韩等亚洲地区表现强劲。 | 这是**最关键的决策点**。你的用户在哪里，就应该优先选择哪里的头部广告平台。 |
| **💰 收入潜力 (eCPM)** | 全球范围内稳定且强大，拥有最大的广告主池。 | 在中国大陆及亚洲市场的 **eCPM (每千次展示收入) 通常显著高于 AdMob**，尤其是在激励视频广告上。 | 如果你的用户集中在中国，穿山甲的变现效率几乎是无与伦比的。 |
| **🛠️ 集成难度 (Capacitor)** | **非常成熟**。有官方或高质量的第三方 Capacitor 插件，集成文档完善，社区支持好。 | **可能有挑战**。官方可能没有直接的 Capacitor 插件，你可能需要寻找第三方插件或通过聚合平台来集成，这会增加一些技术工作量。 | 对于 Capacitor 开发，AdMob 的集成路径更清晰、更简单，是更安全的选择。 |
| **⚖️ 平台政策** | 政策严格，有时会因自动化系统误判而导致封号，申诉流程可能较长。 | 同样严格，但作为国内平台，对于国内开发者的沟通和支持可能更直接、更高效。 | 两者都需要严格遵守政策，但穿山甲在本地化支持上可能有优势。 |
| **🌱 生态系统** | 与 Google Analytics, Firebase 等深度集成，便于进行全面的用户行为分析和 A/B 测试。 | 依托字节跳动的强大算法和广告生态，能进行精准的用户画像和广告推荐。 | AdMob 的生态更偏向于应用分析和增长，而穿山甲的生态更偏向于高效变现。 |

### **最终推荐方案：以 AdMob 为聚合平台，集成穿山甲**

为了同时利用 AdMob 的全球覆盖、便捷集成和穿山甲在中国市场的高收益，我们采用**广告聚合 (Ad Mediation)** 策略。

1.  **主要集成平台:** **Google AdMob**。我们将主要在项目中集成 AdMob 的 Capacitor 插件，这是我们与广告系统交互的主要入口。
2.  **聚合广告网络:** 在 AdMob 的后台，我们将添加**穿山甲 (Pangle) 作为第三方广告源 (Bidding Source)**。
3.  **工作原理:** 当游戏需要展示广告时，AdMob 的聚合系统会自动向 AdMob 自身和穿山甲同时请求广告。平台会选择出价最高（即能为我们带来最多收入）的广告进行展示。

**优势:**
- **收入最大化:** 让两大平台实时竞价，确保每一位用户（无论国内外）都能为我们带来最高的广告价值。
- **集成简便:** 我们只需要在代码层面主要与 AdMob 的 SDK 交互，降低了多平台开发的复杂性。
- **覆盖全面:** 保证了在全球市场和中国大陆市场都有高效的广告填充率和收入表现。

---

## 2. 核心设计原则

为确保广告系统与《代码神祇》“慢节奏、高深度”的核心体验相符，所有广告集成将严格遵守以下原则：

1.  **用户自愿 (Opt-in Only):** 绝不出现任何打断游戏流程的强制性广告。所有广告的播放都必须由玩家主动点击触发。
2.  **价值明确 (Clear Value Proposition):** 玩家在点击广告前，必须能清晰地看到他将获得的**确切收益**。
3.  **主题包装 (Thematic Integration):** 将广告行为包装成符合游戏世界观的行动，如“请求算力赞助”、“运行商业化模块”等。
4.  **平衡至上 (Balance is Key):** 广告收益应作为“加速器”而非“必需品”。非广告玩家的核心循环必须保持完整和有趣。
5.  **频率可控 (Controlled Frequency):** 为关键广告场景设置合理的冷却时间 (Cooldown)，防止破坏游戏经济。

---

## 3. 广告场景实施规划

根据优先级，我们将分阶段实施以下广告场景：

### **P0 (最高优先级)**

#### **场景 1: 离线收益翻倍 (Offline Gains Multiplier)**
- **触发点:** 玩家离线后回归，在展示离线收益的弹窗时。
- **主题包装:** “启动超线程 (x2 收益)”
- **具体收益:** 将本次获得的离线 CP 收益乘以 2。
- **实现方式:** 在 `OfflineProgressModal.vue` 组件中，添加一个附带广告图标的新按钮。点击后触发广告，成功后将收益翻倍并更新UI，玩家再点击领取。

#### **场景 2: 全局增益 BUFF (Global Production Boost)**
- **触发点:** 主界面常驻悬浮图标，玩家可主动点击。
- **主题包装:** “临时服务器超频”
- **具体收益:** 在接下来 **1 小时** 内，所有 **CP (算力)** 产出 x2。
- **限制:**
    - **不影响** RP (重构点) 等核心重置资源的获取。
    - 每次使用后有 **4-6 小时** 的冷却时间。
- **实现方式:** 在主界面 `index.vue` 中添加一个可交互的图标，用于触发 BUFF 和显示倒计时。

---

### **P1 (高优先级)**

#### **场景 3: 关键重置收益加成 (Prestige Currency Multiplier)**
- **触发点:** 玩家执行“代码重构 (Refactor)”时。
- **主题包装:** “优化编译算法”
- **具体收益:** 将本次重构获得的 **RP (重构点)** 收益 **x1.5**。
- **限制:** 每次使用后有 **12 小时** 的冷却时间，确保其稀有性，保护长期数值健康。
- **实现方式:** 在 `RefactorSection.vue` 的确认弹窗中，增加广告触发按钮。

---

## 4. 未来可拓展场景 (Future Considerations)

以下场景可在核心功能完成后，作为后续迭代内容考虑：

- **场景 4: 加速“技术债务”偿还:** 在第二纪元，允许玩家通过广告减少偿还“技术债务”所需的 CP 成本或时间。
- **场景 5: 挑战失败豁免:** 允许玩家在挑战失败退出时，通过广告保留一部分过程性收益，降低挫败感。

---
