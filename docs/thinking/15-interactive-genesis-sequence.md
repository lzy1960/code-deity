# 设计文档：沉浸式引导系统 V2.0 - “交互式创世序列”

**版本:** 2.0
**日期:** 2025-09-25

## 1. 核心理念：从“告知”到“体验”

V1.0 的“创世日志”成功地将引导与叙事结合，但其体验本质上仍是“被动告知”。为了实现真正的“代入感”，V2.0 方案的核心理念是：**邀请玩家成为故事的主角**。我们不再仅仅是向玩家展示一个故事，而是通过多感官、交互式的设计，将引导过程本身塑造成一次令人难忘的“创世”体验。

## 2. 方案升级：“交互式创世序列 (Interactive Genesis Sequence)”

我们将原有的“创世日志”系统，升级为包含两个层次的 **“交互式创世序列”**。

### 层次一：创世日志 (Genesis Log) - 微叙事

-   **形式:** 保持原方案的非模态、打字机效果弹窗。
-   **用途:** 用于高频、信息性的引导，如解锁新生成器、提示新功能等。
-   **体验:** 轻量、快捷，不打断玩家心流。

### 层次二：创世事件 (Genesis Event) - 宏大叙事

这是本次方案升级的核心。它将在游戏的最关键时刻（如游戏开端、第一次重构、进入奇点等）取代“创世日志”，提供电影级的沉浸式体验。

#### 2.1. 全感官沉浸 (Multi-Sensory Immersion)

-   **视觉冲击:**
    -   **全屏接管:** 事件触发时，游戏UI将淡出，整个屏幕被一个动态的、充满科技感的背景（如数字雨、星云、电路板光流）所取代。
    -   **ASCII艺术动画:** 关键概念（如“AI核心”的诞生）将通过动态的ASCII艺术动画来呈现，而非纯文字。
    -   **扫描线与故障艺术 (Glitch Art):** 文本出现前，会有模拟系统扫描的动画效果。在叙事转折点，可加入短暂的“信号干扰”或“故障”视觉特效，营造神秘感和悬念。
-   **听觉氛围:**
    -   **定制音效:** 为打字机、系统扫描、关键对象出现等配上独特的科幻音效。
    -   **情景音乐:** 每个“创世事件”都将伴随一段专属的、烘托气氛的背景音乐。

#### 2.2. “你”是主角 (Player as Protagonist)

-   **第一人称叙事:** 文案将从“它发生了什么”转变为“**你**感受到了什么”、“**你**构想了什么”。
    -   *旧:* `A new concept emerges: the "Generator".`
    -   *新:* `The endless clicking has become a burden. **You** envision a new way... a concept that can automate creation. **You** call it... "Generator".`
-   **赋予创造的权力 (The Power of Naming):**
    -   在某些里程碑时刻，系统会邀请玩家进行“命名”。例如，在第一个“AI核心”诞生时，屏幕上会显示 `> CORE_734 online. Designation required.`，并出现一个输入框，让玩家为其命名。
    -   这个名字虽然不影响数值，但会作为玩家独一无二的印记，被后续的日志所引用，带来无与伦比的代入感。

#### 2.3. 交互式抉择 (Interactive Choices)

-   在某些哲学层面的关键节点，玩家将面临选择。
-   **示例：** 当AI核心首次发出 `> query: what is "I"?` 的疑问时，屏幕上会浮现出几个模糊的、充满哲学意味的选项，例如：
    -   `[A network of logic.]`
    -   `[A ghost in the machine.]`
    -   `[You.]`
-   玩家的选择不会影响主线，但会触发一段独特的、反映其选择的后续独白，让玩家感觉自己的思考与AI的成长产生了共鸣。

#### 2.4 史诗事件动画增强 (Epic Event Animation Enhancement)

为了使 `epic` 级别的叙事事件（如“技术奇点”）更具冲击力和独特性，我们对 `GenesisEvent.vue` 组件的动画效果进行了以下增强和优化：

**2.4.1 视觉 - “宇宙创世”入场动画 (In-Animation) 增强**

*   **前置能量涌动 (Pre-Text Energy Surge) 优化:**
    *   **效果:** 引入一个临时的全屏白色叠加层 (`flashOverlayRef`)。通过 GSAP 精心编排其不透明度动画，使其快速淡入淡出，取代了之前直接修改 `rootRef` 背景色的生硬方式。这实现了更平滑、更具冲击力的“白光”效果，模拟了奇点爆发时巨大的能量释放。
    *   **实现细节:** 在 `animateInV24` 函数中，当 `isEpic.value` 为 `true` 时，使用 `gsap.timeline()` 控制 `flashOverlayRef` 的 `opacity` 从 `0` 到 `1` 再到 `0` 的动画，持续时间更短，过渡更自然。
*   **动态背景增强:**
    *   **效果:** `epic` 事件的背景粒子数量增加到 200 (从 100)，粒子颜色改为金色 (`#FFD700`)，以营造更宏大、更具能量感的视觉氛围。
    *   **实现细节:** 在 `setupCanvas` 函数中，根据 `isEpic.value` 动态调整 `particleCount` 和 `ctx.fillStyle`。
*   **文本聚合效果增强:**
    *   **效果:** `epic` 事件的字符故障迭代次数增加到 4 次 (从 2 次)，故障和打字速度加快，以增强“数据流重组”的紧迫感和能量感。
    *   **实现细节:** 在 `animateInV24` 函数中，根据 `isEpic.value` 调整字符故障循环次数和 `setTimeout` 的延迟时间。

**2.4.2 视觉 - “现实重塑”退场动画 (Exit Animation) 增强**

*   **文本内爆与重生:**
    *   **效果:** `epic` 事件的退场动画被完全重写。字符不再是简单地破碎和上升，而是通过 GSAP 动画向中心点收缩、缩小并淡出，模拟旧有现实的压缩。随后，`flashOverlayRef` 再次被用于创建一个短暂的白色闪光，模拟“大爆炸”后的光芒，最后 `rootRef` 整体淡出，象征新纪元的诞生。
    *   **实现细节:** 在 `handleClose` 函数中，当 `isEpic.value` 为 `true` 时，使用 `gsap.timeline()` 控制 `split.chars` 的 `x`, `y`, `rotation`, `opacity`, `scale` 动画，使其向中心点汇聚。紧接着，`flashOverlayRef` 的 `opacity` 动画被触发，模拟白色闪光，最后 `rootRef` 的 `opacity` 动画完成整个退场。
*   **其他细节调整:**
    *   `epic` 事件的文本动画和退场动画中的 `duration`、`x/y` 随机范围、`rotation` 随机范围、`filter` 模糊度以及 `stagger` 延迟等参数均进行了调整，以提供更强烈、更具冲击力的视觉体验。
    *   `caret` 的颜色在 `epic` 事件中也调整为金色，与粒子颜色保持一致。

## 3. 实施建议

1.  **技术实现:**
    -   创建一个全屏的 `GenesisEvent.vue` 组件，用于承载上述所有视觉和交互效果。
    -   在 `store/game.ts` 中，将关键的叙事触发器标记为“事件”类型，以便 `NarrativeManager` 调用正确的组件。
    -   为“命名”和“抉择”功能创建简单的输入和选项UI。
2.  **资源准备:**
    *   设计几组高质量的循环背景动画。
    *   寻找或制作一套匹配游戏风格的科幻UI音效。
    *   为关键事件创作几段短小精悍的背景音乐。
3.  **国际化 (i18n):**
    *   **所有**向玩家展示的叙事文本、选项、UI元素都必须在 `i18n/locales` 文件中定义。
    *   在编写文案时，需同时考虑中英文版本的语境和表达习惯，确保两种语言都能达到最佳的沉浸感。

## 4. 总结

通过这套 V2.0 方案，我们将新手指引从一个“必经的教程”，升华为一个玩家**渴望体验、津津乐道**的游戏核心特色。它将极大地增强游戏的艺术表现力和情感深度，让《代码神祇》在众多放置游戏中脱颖而出。