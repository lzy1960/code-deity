### **产品设计文档：核心数值与解锁节奏 (第一纪元)**

#### **一、 核心设计哲学**

1. **感受“第一次”的艰难：**  玩家的第一次手动点击、第一次购买生成器、第一次重构，都应该是缓慢且有意义的。这能建立起对数值增长的基本认知和珍惜感。
2. **“对数”而非“线性”的时间感：**  第一个小时解锁的内容，可能比接下来一整天解锁的还要多。而玩了一周后，可能需要花另一周才能解锁一个新机制。游戏时间的感知尺度是不断拉长的。
3. **“撞墙”是游戏的一部分：**  玩家会频繁遇到增长瓶颈（“撞墙”）。游戏的设计就是要引导玩家利用新解锁的系统（如重构、挑战）来打破这堵墙，从而获得巨大的满足感。
4. **万物皆有公式：**  所有数值的背后都应有清晰、可预测的数学公式。这符合游戏的主题，也让硬核玩家有策略优化的空间。

---

#### **二、 元素初始值与增长公式**

**重要提示：**  以下数值均为**基准设计值**。在实际开发中，这些值需要通过大量测试来进行微调，以达到最佳的游戏节奏。核心在于**增长率的数量级**。

- **通用规则：**
  - **购买奖励 (递减收益设计):** 为了平滑游戏曲线，购买奖励引入递减机制。每获得一级奖励，该生成器的**最终产量倍率 x2**。
    - **0-100 个:** 每购买 **10** 个，获得一级奖励。
    - **101-1000 个:** 每购买 **20** 个，获得一级奖励。
    - **1001-5000 个:** 每购买 **50** 个，获得一级奖励。
    - **5001+ 个:** 每购买 **100** 个，获得一级奖励。
  - **成本增长公式：** Cost(n) = BaseCost \* (CostMultiplier ^ (n-1))，其中  n  是你将要购买的第  n  个。

|       |                         |                     |                           |                              |
| ----- | ----------------------- | ------------------- | ------------------------- | ---------------------------- |
| 阶层  | 名称 (Name)             | 基础成本 (BaseCost) | 成本乘数 (CostMultiplier) | 基础产量 (Base Production/s) |
| **1** | **变量 (Variable)**     | 10                  | 1.15                      | 1 CP/s                       |
| **2** | **函数 (Function)**     | 100                 | 1.20                      | 1 Variable/s                 |
| **3** | **类 (Class)**          | 1e4                 | 1.25                      | 1 Function/s                 |
| **4** | **模块 (Module)**       | 1e6                 | 1.30                      | 1 Class/s                    |
| **5** | **库 (Library)**        | 1e9                 | 1.35                      | 1 Module/s                   |
| **6** | **框架 (Framework)**    | 1e13                | 1.40                      | 1 Library/s                  |
| **7** | **编译器 (Compiler)**   | 1e18                | 1.45                      | 1 Framework/s                |
| **8** | **AI 核心 (A.I. Core)** | 1e24                | 1.50                      | 1 Compiler/s                 |

- **设计思路：**
  - **基础成本**每阶大约增长 100 到 1000 倍，形成明显的阶梯感。
  - **成本乘数**逐渐变大，意味着高阶生成器会更快地变得昂贵，迫使玩家寻求全局性的提升（即重构）。

---

#### **三、 系统解锁与核心循环机制**

##### **3.1 循序渐进的系统解锁 (Progressive Disclosure)**

- **初始状态：** 界面上只有[ 手动编写代码 ]按钮和CP总量显示。
- **解锁“变量”：** 手动点击 CP 达到 10 后，按钮消失，生成器列表出现。
- **解锁高阶生成器：** 购买 N 阶生成器后，N+1 阶才会出现。

##### **3.2 “代码重构” (Refactor) 与 “架构过载” (Architectural Overhead)**

- **玩家体验：** 玩家会发现，在购买了12个“AI核心”后，增长开始显著放缓，这是“架构过载”机制生效的标志。

- **解锁“重构”功能：**
  - **条件：** 拥有 **10 个** 第 8 阶“AI 核心”。
  - **展现：** 出现系统提示和底部的“重构”标签页。

- **核心机制 1: 架构过载 (Soft Cap) - v1.2 平衡性调整**
  - **叙事：** 当“AI核心”数量过多（>25）时，系统被视为臃肿的“单体架构”，产生巨大的“系统开销”，导致效率下降。
  - **触发条件：** 拥有的“AI核心”数量 > 25 个。
  - **惩罚公式：** `最终CP产出 = (惩罚前的CP产出) * 惩罚指数`，其中 `惩罚指数 = 1 / (1 + 0.1 * log10(AI核心数量 - 24))`
  - **设计备注：** 惩罚方式已从v1.0的**指数**惩罚调整为更平滑的**乘法**惩罚，系数也从0.2调整为0.1，以鼓励玩家进行长线投资，而不是在25个AI核心处完全停滞。
  - **UI提示：** 采用“强提醒 + 常驻指示器”方案。
    1. **强提醒：** 玩家购买第26个AI核心时，会出现一个临时的顶部系统警告横幅。
    2. **常驻指示器：** 横幅消失后，一个警示图标和实时效率（如“⚠️ 效率: 86.5%”）会**常驻于顶部主信息栏**，直到玩家重构解决问题。
    3. **详细数据：** “统计”页的“架构效率”会实时显示当前的具体惩罚数值。
  - **设计目的：** 采用“长线发展”模型，大幅放宽惩罚。将惩罚从“硬墙”变为非常平缓的“斜坡”，鼓励玩家在一轮重构中走得更远，使购买50个左右的AI核心成为一个可行的、有挑战性的策略。

- **核心机制 2: 重构收益**
  - **重构点(RP)获取公式：** `RP = floor( (CP.log10() / 20) ^ 1.5 )`
    - *注：此公式与代码实现一致，原文档中 `/ 308` 是一个笔误。*
  - **重构点(RP)效果公式：** 每个 RP 为所有生成器的产量提供 +10% 的**加法**增益。`总倍率 = 1 + (RP * 0.1)`。
  - **首次重构策略建议：** 绝对的“最优时机”难以计算且会扼杀探索乐趣。我们为玩家提供一个策略指引：**在首次重构时，一次性获得 5-10 个 RP 是一个比较扎实的策略。** 这能确保获得 +50% ~ +100% 的可观产量加成，让下一轮游戏进程明显加快，从而获得强烈的正反馈。

##### **3.3 “编译发布” (Compile & Release)**

- **玩家体验：** 玩家已经习惯了“攒 CP -> 重构”的循环，但感觉依然很肝。
- **解锁“编译发布”功能：**
  - **条件：** 拥有的“重构点 (RP)” 达到 **25** 点 (或已拥有至少1个版本号)。
  - **展现：** 
    - 在“升级”页面的“重构”标签旁边，出现一个新的二级标签页 📦 编译发布。该标签页在未解锁时会显示为锁定状态，并提示解锁条件。
    - 在顶部主信息栏，CP数值旁边将出现RP数值的常驻显示，方便玩家时刻关注两大核心资源。
- **“编译发布”页面的数值设计：**
  - **版本号(Version)效果：** 每个“版本号”使“重构点”的**效果**提升 20%。`总倍率 = 1 + (RP * 0.1 * (1 + Version * 0.2))`。
  - **成本设计：** “编译发布”需要消耗 RP，成本随版本号提升。
    - **成本公式：** `Cost = 10 * (当前版本号 + 1) ^ 2`
    - **示例：** 升级到版本 1 需要 10 RP，升级到版本 2 需要 40 RP，以此类推。
    - **设计思路：** “发布”提供的是**乘法**增益，它的效果远强于单纯累积 RP。为其增加二次方增长的成本，可以引导玩家进行更高层次的策略思考：是进行多次快速重构，还是进行一次艰难但收益巨大的发布？

##### **3.4 后续系统解锁**

- **解锁“自动化”功能：**
  - **条件：** 完成 **第一次**“编译发布”。
  - **展现：** 底部导航栏出现一个新的 🤖 自动化 标签页。

- **解锁“挑战”功能：**
  - **条件：** 完成 **第二次**“编译发布”。
  - **展现：** 在“升级”标签页中，出现 🏆 挑战 的二级标签页。
- **“挑战”的设计示例：**
  - **挑战 1：原始计算**
    - **规则：** 1-4 阶生成器产量为 0。
    - **目标：** 在此规则下，达成一次“重构”。
    - **奖励：** **所有**生成器的购买奖励效果从 x2 永久提升至 x2.2。
  - **挑战 2：内存限制**
    - **规则：** 生成器的产量会随着时间推移而逐渐降低，需要通过“重构”来重置衰减。
    - **目标：** 在此规则下，CP 达到 1e500。
    - **奖励：** **重构点(RP)** 的获取量永久 x1.5。

通过以上循序渐进的解锁节奏和精心设计的数值模型，我们可以引导玩家平滑地从一个新手成长为能够熟练运用多重系统的策略大师，确保了游戏长期的趣味性和可玩性。
